---
description: 検証またはデレゲートすることでAvalancheにステークする方法を学びます。
---

# ステーキング

ステーキングとは、トークンをロックアップすることでネットワークをサポートしながら、その報酬を受け取るプロセスです。ステーキングの概念は、PeercoinのSunny King氏とScott Nadal氏により[はじめて正式に紹介](https://web.archive.org/web/20160306084128/https://peercoin.net/assets/paper/peercoin-paper.pdf)されました。

## プルーフオブステークはどのように機能するのか?

[シビル攻撃](https://support.avalabs.org/en/articles/4064853-what-is-a-sybil-attack)に対抗するために、分散型ネットワークは、ネットワークへの影響力に対し希少なリソースで支払うことを求める必要があります。プルーフオブワークシステムでは、この希少なリソースはコンピューティングパワーです。Avalancheでは、リソースはネイティブトークンであるAVAXが適用されます。Avalanche上での希少なリソースとはネイティブトークンである[AVAX](../../#avalanche-avax-token)のことです。ノードがAvalanche上でブロックチェーンを[検証](http://support.avalabs.org/en/articles/4064704-what-is-a-blockchain-validator)するためには、AVAXをステークをしなくてはなりません。

## Avalancheのステーキングパラメータ

バリデータによる[一次ネットワーク](http://support.avalabs.org/en/articles/4135650-what-is-the-primary-network)の検証が完了すると、ステークしたAVAXトークンが返されます。ネットワークの安全を確保する貢献に対して報酬を受け取ることができます。バリデーターは、検証を行っている間に十分な応答をし、正しく動作していた場合にのみ[バリデーション報酬](http://support.avalabs.org/en/articles/4587396-what-are-validator-staking-rewards)を受け取ることができます。AVAXとステークの仕組みの詳細は、[Avalancheトークンホワイトペーパー](https://files.avalabs.org/papers/token.pdf)をお読みください。

{% hint style="warning" %}ステーキングの報酬は、**これらのパラメータがすべて満たされる限り**、ステーキング期間の終了時に、ウォレットのアドレスに送信されます。{% endhint %}

* バリデーターの最低ステーク額は2,000AVAX
* デリゲーターがによる委任最低額は25AVAX
* 検証のための資金のステーク最低期間は2週間
* 検証のための資金のステーク最大期間は1年
* 委任において資金をステークできる最低期間は2週間
* 委任において資金をステークできる最大期間は1年
* 最低委任料率は2％
* バリデーターの最大量（自身のステーク＋委任されたステーク）は、最低3e6 AVAXとバリデータがステークした量の5倍の額です。例えば、バリデータになるために2,000AVAXをステークした場合、自身のノードに委任できるのは合計8,000AVAXのみです。（デリゲーター毎ではありません）
* 報酬を受け取るには、バリデーターが正しくオンラインである必要があり、その時間の最低パーセンテージは80％です。

## バリデータ

**バリデーター**は、Avalancheを保護し、新しいブロック／バーテックスを作成し、トランザクションを処理します。コンセンサスに達するため、バリデーターは、互いに繰り返しサンプリングを行います。特定のバリデーターがサンプリングされる確率は、そのステーク量に比例します。

バリデーターセットにノードを追加するときに以下を指定します：

* ノードID
* 検証をスタートおよび停止したい時
* ステークAVAX量
* 報酬を送付先のアドレス
* デリゲーション料率（下記参照）

{% hint style="info" %}バリデーターの最低ステーク量は、2,000 AVAXです。{% endhint %}

{% hint style="danger" %}いったんトランザクションを発行し、ノードをバリデーターとして追加してしまうと、パラメータを変更する方法はないということに注意してください。**ステークを早期に削除したり、ステーク額、ノードID、報酬アドレスを変更したりすることはできません。**次のAPI呼び出しで正しい値を設定していることを確認してください。不明な点がある場合は、[Discord](https://chat.avax.network)でサポートを求めるか、[開発者向けFAQ（よくある質問）](http://support.avalabs.org/en/collections/2618154-developer-faq)を参照してください。自分のバリデータにさらにトークンを追加したい場合は、このノードにトークンを委任することができます。ただし、基本的な検証量を増やすことはできません（そのため、自分に委任することは委任の上限に反することになります）。{% endhint %}

### バリデーターの実行<a id="running-a-validator"></a>

バリデーターを実行して報酬を受け取るためには、ノードが接続されていることが重要です。[こちら](http://support.avalabs.org/en/articles/4594192-networking-setup)を参照してください。

バリデーターを追加するためにトランザクションを発行すると、管理アドレスからステークトークンとトランザクション手数料が差し引かれます。バリデーションが完了すると、ステーク資金は元のアドレスに返却されます。獲得した報酬は、バリデーターを追加した際に指定したアドレスに送付されます。

#### API呼び出しを許可する<a id="allow-api-calls"></a>

リモートマシンからノードにAPIコールを行うには、API ポート（デフォルトでは`9650`）でのトラフィックを許可し、引数`--http-host=`でノードを実行します。

コマンドライン引数を介して使用しないすべてのAPIを無効にする必要があります。信頼されたマシン \(例：PCなど\) からのAPIポートへのアクセスのみを許可するようにネットワークを構成する必要があります。

#### アップタイムが低い原因は？<a id="why-is-my-uptime-low"></a>

Avalanche上の全てのバリデーターは、他のバリデーターの稼働時間を追跡します。`info.peers`を呼び出すことで、ノード接続と各接続のアップタイムを確認できます。**これはあくまでも一つのノードの視点に過ぎません**。他のノードは、あなたのノードのアップタイムを異なる形で認識する可能性もあります。あるノードがあなたのアップタイムが低いと認識しても、ステーク報酬を受け取れなくなるということではありません。

あなたのノードが他のノードに接続されていない理由として考えられるのは、NATトラバーサルが失敗し`--public-ip=[NODE'S PUBLIC IP]`でノードが起動されなかったということです。将来的には、ノードが接続されているかどうかを簡単に確認できるように、より良い監視機能を追加する予定です。

#### シークレットマネジメント<a id="secret-management"></a>

バリデーションノードに必要なシークレット要素は、ノードのIDを決定するTLSキーであるStaking Key（ステーキングキー）だけです。最初にノードを起動するとStaking Key（ステーキングキー）が作成され`$HOME/.avalanchego/staking/staker.key`に置かれます。このファイル（および`staker.crt`）は安全な場所にバックアップしておいてください。ステーキングキーを失うと、あなたのノードは新しいIDを持つことになりバリデーション報酬が危険にさらされる可能性があります。

バリデーションノードにAVAXを保持する必要はありません。実際、ノードに多くの資金を持た**ない**ことが最善の方法です。ほとんど全ての資金は、秘密鍵がどのコンピュータにもないコールドアドレスに置くべきです。

#### モニタリング<a id="monitoring"></a>

このチュートリアルでは、ノードのアップタイムや一般的な稼働状態を監視する方法を学びます。

{% page-ref page="../../build/tutorials/nodes-and-staking/setting-up-node-monitoring.md" %}

#### Fujiでの検証

Fujiで検証するには、`1 AVAX`のみが必要となります。そのため、簡単にバリデータノードを設定し、バリデーションについて学ぶことができます。

## デリゲーター

デリゲーターとは、ステークで貢献する上で既存のバリデーターノードを信頼して保有トークンを委任することを選択したトークンホルダーのことです。

バリデーターに委任する際には以下を指定します：

* 委任先のノード ID
* ステークの委任をスタート／停止させたいタイミング（バリデーターが検証している間である必要があります。）
* ステークAVAX量
* 報酬を送付先のアドレス

{% hint style="info" %}デリゲーターによる委任最低額は25AVAXです。{% endhint %}

{% hint style="danger" %}いったんトランザクションを発行して、デリゲータをステークに追加するとパラメータを変更することはできないことに注意してください。**ステークを早期に削除したり、ステーク額、ノードID、報酬アドレスを変更したりすることはできません。**不明な点がある場合は、[Discord](https://chat.avax.network)でサポートを求めるか、[開発者向けFAQ（よくある質問）](http://support.avalabs.org/en/collections/2618154-developer-faq)を参照してください。{% endhint %}

### デリゲーター報酬<a id="delegator-rewards"></a>

トークン委任先のバリデーターが正しい稼働をしている場合は、 委任が完了した時点で報酬を受け取ることができます。デリゲーターはバリデーターと同じシステムに従って報酬を受け取ります。ただし、バリデーターはデリゲーション料率で指定された報酬の一部を保持します。

トークンを委任するためにトランザクションを発行すると、アドレスからステークトークンとトランザクション手数料が差し引かれます。委任が完了するとステークトークンはアドレスに返却されます。報酬を獲得した場合は、トークンを委任した際に指定したアドレスに送られます。

## よくある質問

### バリデータの健全性をチェックするツールはありますか？

はい、[こちら](https://stats.avax.network/dashboard/validator-health-check)にはあなたのノードIDを入力してください。このツールの詳細については[こちら](https://github.com/ava-labs/avalanche-docs/tree/5522f4864aab0089e456bfa3876f2dc4a4c01fe9/build/tools/avalanche-stats/README.md#validator-health-check)をご覧ください。

### バリデータがステーキングリワードを受け取るかどうかは、どのようにして決まるのですか？

ノードがバリデータセットから離脱すると、離脱したノードがステーキング報酬を受け取るべきかどうかをバリデータが投票します。バリデーターが、そのノードが必要な時間（現在は80％）以上オンラインで応答していたと考えた場合、バリデーターはそのノードに投票し、ステーキング報酬を受け取ることになります。そうでなければ、バリデータはそのノードがステーキングリワードを受け取るべきではないと投票します。この投票の結果（ステークによる重み付け）によって、ノードが報酬を受け取るかどうかが決まります。

各バリデーターは、「はい」か「いいえ」のどちらかしか投票しません。例えば、ノードのアップタイムに関する意見を共有し、その回答を平均化するようなことはしません。

各検証期間は個別に検討します。つまり、あるノードがバリデータセットに参加した後、離脱したとします。そして、また参加しては離脱します。バリデーターセット内の最初の期間におけるノードの稼働時間は、バリデーターセット内の2番目の期間にステーキングリワードを受け取るかどうかには影響しません。

