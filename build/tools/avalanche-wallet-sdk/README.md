# ã‚¦ã‚©ãƒ¬ãƒƒãƒˆSDK

## æ³¨æ„ï¼šãƒ™ãƒ¼ã‚¿ç‰ˆãƒªãƒªãƒ¼ã‚¹ğŸ”´

ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯é€Ÿã„é€Ÿåº¦ã§é–‹ç™ºã•ã‚Œã¦ãŠã‚Šã€é »ç¹ã«å¤‰æ›´ãŒåŠ ãˆã‚‰ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ç›£æŸ»ã¯ä¿ç•™ä¸­ã§ã™ã€‚

## Avalancheã‚¦ã‚©ãƒ¬ãƒƒãƒˆSDKï¼ˆãƒ™ãƒ¼ã‚¿ç‰ˆï¼‰

Avalancheã‚¦ã‚©ãƒ¬ãƒƒãƒˆSDKã¯ã€Avalancheãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã§è‡ªå·±ç®¡ç†ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚’ä½œæˆã€ç®¡ç†ã™ã‚‹ãŸã‚ã®TypeScriptãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

Avalancheã®X-Chainã€P-Chainã€C-Chainä¸Šã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ãŸã‚ã®é«˜ãƒ¬ãƒ™ãƒ«ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æä¾›ã—ã¾ã™ã€‚

ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã®ç¨®é¡ã¯ã€æ¬¡ã®é€šã‚Šã§ã™ã€‚

* ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ã‚¦ã‚©ãƒ¬ãƒƒãƒˆ
* ãƒ¬ãƒƒã‚¸ãƒ£ãƒ¼ã‚¦ã‚©ãƒ¬ãƒƒãƒˆ
* ãƒ‹ãƒ¼ãƒ¢ãƒ‹ãƒƒã‚¯ã‚¦ã‚©ãƒ¬ãƒƒãƒˆ
* XPUBã‚¦ã‚©ãƒ¬ãƒƒãƒˆ

`avalanche-wallet-sdk`ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ã¯æ¬¡ã®ã‚ˆã†ã«é€²ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

* ãƒˆãƒ¼ã‚¯ãƒ³ã‚„NFTã®å—ä¿¡ã¨é€ä¿¡ã€‚
* ãƒã‚§ãƒ¼ãƒ³é–“ã®è³‡é‡‘ç§»å‹•
* ãƒãƒªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ãƒãƒ¼ãƒ‰ã®è¿½åŠ 
* ã‚¹ãƒ†ãƒ¼ã‚¯ã®ãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼ã¸ã®ãƒ‡ãƒªã‚²ãƒ¼ãƒˆ
* ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ã‚‰ã®ã‚­ãƒ¼ã‚¹ãƒˆã‚¢ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
* ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å±¥æ­´ã®å–å¾—
*  X-Chainä¸Šã®ãƒŸãƒ³ãƒˆNFT

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã€ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®[Github repo](https://github.com/ava-labs/avalanche-wallet-sdk)ã«ã‚ã‚Šã¾ã™ã€‚

#### `npm`ã§ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

`npm install --save @avalabs/avalanche-wallet-sdk`

#### `yarn`ã§ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

`yarn add @avalabs/avalanche-wallet-sdk`

### ã‚¯ãƒ©ã‚¹

ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚¯ãƒ©ã‚¹ã¯[ã“ã¡ã‚‰](wallet-classes.md)ã§ã™ã€‚

### ä½¿ç”¨ä¾‹

#### ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼

ã™ã¹ã¦ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ã€ãã®çŠ¶æ…‹ã®å¤‰åŒ–ã‚’ç¤ºã™ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç”Ÿã•ã›ã¾ã™ã€‚

```typescript
// Create a wallet instance
let myWallet = MnemonicWallet.create()

// Fired when the wallet starts using a new address
// Used only with HD wallets (Mnemonic, Ledger, and XPUB)
myWallet.on('addressChanged', (addresses)=>{
    // Use the most recent addresses from the wallet
})

// Fired when X chain balance is updated
myWallet.on('balanceChangedX', (newBalance)=>{
    // Recent X chain balance
})

// Fired when P chain AVAX balance is updated
myWallet.on('balanceChangedP', (newBalance)=>{
    // Recent P chain AVAX balance
})

// Fired when C chain AVAX balance is updated
myWallet.on('balanceChangedC', (newBalance)=>{
    // Recent C chain AVAX balance
})
```

#### AVAXã®é€ä¿¡

```typescript
import {MnemonicWallet, BN} from '@avalabs/avalanche-wallet-sdk'

let myWallet = MnemonicWallet.create()

// Mnemonic wallets need to find their HD index on startup
await myWallet.resetHdIndices()

// Update the UTXOs
await myWallet.updateUtxosX()

// Send 1 nAVAX
let to = "X-avax1r20dtfehaat9wev69ajzzfcwtll903vlcx50uh"
let amount = new BN(1)
let txID = await myWallet.sendAvax(to, amount)
```

#### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®å¤‰åŒ–

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€SDKã¯Avalancheãƒ¡ã‚¤ãƒ³ãƒãƒƒãƒˆã«æ¥ç¶šã•ã‚Œã¦ã„ã¾ã™ã€‚

```typescript
import { NetworkConstants, Network} from '@avalabs/avalanche-wallet-sdk';

// Set to Mainnet
Network.setNetwork(NetworkConstants.MainnetConfig)

// Set to Fuji Testnet
Network.setNetwork(NetworkConstants.TestnetConfig)
```

#### BNï¼ˆãƒ“ãƒƒã‚°ãƒŠãƒ³ãƒãƒ¼ï¼‰ã®å°åˆ·

ãƒˆãƒ¼ã‚¯ãƒ³ã®é‡ã¯BN.jsã‚’ä½¿ç”¨ã—ã¦æœ€å°ã®å‰²ã‚Šåˆ‡ã‚Œã‚‹å˜ä½ã§è¡¨ç¾ã•ã‚Œã¾ã™ã€‚`Utils`ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹ã«ã¯ã€BNã®æ•°å­—ã‚’äººé–“ãŒèª­ã¿ã‚„ã™ã„ã‚ˆã†ã«è¡¨ç¤ºã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ãŒã‚ã‚Šã¾ã™ã€‚

```typescript
import {Utils} from '@avalabs/avalanche-wallet-sdk'

// On X-Chain and P-Chain AVAX has 9 decimals
let amtX = new BN(1234567000000)
Utils.bnToAvaxX(amtX) // 1,234.567

// On the C-Chain it has 18
let amtC = new BN(1234567000000000000000)
Utils.bnToAvaxC(amtC) // 1,234.567
```

#### Websocketãƒ—ãƒ­ãƒã‚¤ãƒ€

`WebsocketProvider`ã®ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã€ãƒãƒ¼ãƒªãƒ³ã‚°ãªã—ã§ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã®æ®‹é«˜ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«æ›´æ–°ã—ã¾ã™ã€‚

```typescript
import { Network, NetworkConstants } from 'avalanche-wallet-sdk';

// Create a websocket provider from the network currently used by the SDK
const provider = Network.WebsocketProvider.fromActiveNetwork()

// To track wallets and update their balances
provider.trackWallet(myWallet)

// To stop tracking wallets
// Make sure to call this to avoid memory leaks
provider.removeWallet(myWallet)

// To change provider network
provider.setNetwork(NetworkConstants.TestnetConfig) // connect to Fuji testnet
```

#### ERC20ãƒˆãƒ¼ã‚¯ãƒ³ã®è¿½åŠ 

æœ¬SDKã«ã¯ERC20ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆãŒæ­è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®ã‚ˆã†ã«ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```typescript
import { Assets } from '@avalabs/avalanche-wallet-sdk'

// Will try to fetch details about the ERC20 contract
try{
    await Assets.addErc20Token('0x34B6C87bb59Eb37EFe35C8d594a234Cd8C654D50'); // Testnet DAI
}catch(e){
    // Contract not found or not valid
}

// or from known data
let tokenData = {
    chainId: 43114,
    address: '0xbA7dEebBFC5fA1100Fb055a87773e1E99Cd3507a',
    decimals: 18,
    name: 'Dai Stablecoin',
    symbol: 'DAI',
}

Assets.addErc20TokenFromData(tokenData)
```

